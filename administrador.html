<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
  <link rel="icon" type="image/svg+xml" href="/public/logo1.png" />
  <link rel="stylesheet" href="src/administrador.css">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SISTEMA DE INVENTARIO</title>
</head>

<body>

  <div class="title">
    <table>
      <td>
        <div class="contenedor"> <img src="public/logo1.png" alt="Logo" height="100px" width="100px"> </div>
      </td>
      <td>
        <div class="margenCelda">
          <h1>SISTEMA DE INVENTARIO</h1>
          <h4>DEPARTAMENTO DE RECURSOS MATERIALES Y SERVICIOS</h4>
        </div>
      </td>

    </table>
  </div>

  <br><br>

  <div class="contenedor-botones">

    <div class="contenedor-botones-titulo">
      <script>
        document.addEventListener("DOMContentLoaded", () => {
          const adminEmail = localStorage.getItem("adminEmail");

          if (adminEmail) {
            document.getElementById("adminEmailDisplay").textContent = adminEmail;
          } else {
            document.getElementById("adminEmailDisplay").textContent = "No se encontró un email.";
          }
        });

      </script>
      <br>
      <h5>MENÚ DE ADMINISTRADOR:</h5>
      <h6>¡Bienvenido(a), <span id="adminEmailDisplay"></span>!</h6>
    </div>

    <br><br>

    <div class="contenedor-botones-opciones">
      <button type="button" class="btn btn-dark" data-bs-toggle="modal" data-bs-target="#ModalRegistros">
        <i class="bi bi-archive-fill"> Añadir resgistros</i>
      </button>

      <button type="button" class="btn btn-dark" data-bs-toggle="modal" data-bs-target="#ModalBandeja">
        <i class="bi bi-envelope-arrow-down-fill"> Bandeja de entrada</i>
      </button>

      <a href="admusr.html"><button type="button" class="btn btn-dark">
          <i class="bi bi-people-fill"> Administrar usuarios</i>
        </button></a>



      <button type="button" id="exitbutton" class="btn btn-danger">
        <i class="bi bi-box-arrow-left"> Cerrar sesión</i>
      </button>
      <script>
        document.getElementById('exitbutton').addEventListener('click', function () {
          Swal.fire({
            title: '¿Desea cerrar sesión?',
            icon: 'question',
            showDenyButton: true,
            confirmButtonText: 'Sí',
            denyButtonText: `No`
          }).then((result) => {
            if (result.isConfirmed) {
              window.location.href = 'index.html';
            }
          });
        });
      </script>

    </div>

    <br> <br>

    <div class="contenedor">
      <h4>VISTA DE LOS INMUEBLES REGISTRADOS:</h4>
    </div>

    <div class="paginacion">
      <div class="contenedor-botones-opciones-2">
        <button id="primeraPagina" class="btn btn-success"><i class="bi bi-skip-start-fill"></i> Primera Página</button>
        <button id="prevPage" class="btn btn-primary"><i class="bi bi-arrow-left-short"></i> Anterior</button>
        <div class="contenedor-paginacion">
          <input type="number" id="inputPagina" min="1" value="1">
          <span id="paginaActual">/</span>
        </div>
        <button id="nextPage" class="btn btn-primary">Siguiente <i class="bi bi-arrow-right-short"></i></button>
        <button id="ultimaPagina" class="btn btn-success">Última Página <i class="bi bi-skip-end-fill"></i></button>
      </div>
    </div>

    <br>
    <div class="contenedor">
      <h6>BUSQUEDA DE REGISTROS:</h6>
    </div>

    <div class="contenedor-busqueda">
      <input type="text" id="busqueda" placeholder="Buscar...">
      <button id="btnBuscar" class="btn btn-success">Buscar</button>
      <button id="cancelarBusqueda" class="btn btn-secondary">Cancelar Búsqueda</button>
    </div>

    <script>
      document.getElementById("btnBuscar").addEventListener("click", () => {
        const termino = document.getElementById("busqueda").value.toLowerCase();
        filtrarDatos(termino);
      });

      document.getElementById("cancelarBusqueda").addEventListener("click", () => {
        document.getElementById("busqueda").value = "";
        mostrarPagina(paginaActual); // Regresar al estado original
      });

      function filtrarDatos(termino) {
        const tablaCuerpo = document.querySelector("#tablaDatos tbody");
        tablaCuerpo.innerHTML = "";

        const datosFiltrados = datos.filter(fila =>
          fila.INVENTARIOINT.toLowerCase().includes(termino) ||
          fila.CATEGORIAS.toLowerCase().includes(termino) ||
          fila.DESCRIPCION.toLowerCase().includes(termino) ||
          fila.RESGUARDANTE.toLowerCase().includes(termino) ||
          fila.ESTADO.toLowerCase().includes(termino)
        );

        datosFiltrados.forEach(fila => {
          const tr = document.createElement("tr");
          tr.innerHTML = `
            <td>${fila.INVENTARIOINT}</td>
            <td>${fila.CATEGORIAS}</td>
            <td>${fila.DESCRIPCION}</td>
            <td>${fila.RESGUARDANTE}</td>
            <td>${fila.ESTADO}</td>
            <td>
                <button class="btn btn-outline-dark" data-bs-toggle="modal" data-bs-target="#ModalMasInfo" onclick="actualizarModal(${fila.ID})">
                    <i class="bi bi-eye"></i> Mostrar todo
                </button>
            </td>
        `;
          tablaCuerpo.appendChild(tr);
        });

        actualizarUI();
      }

    </script>

    <br>

    <script>
      const apiUrl = "http://localhost:3000/general";
      const elementosPorPagina = 10;
      let paginaActual = 1;
      let datos = [];

      async function cargarDatos() {
        try {
          const respuesta = await fetch(apiUrl);
          datos = await respuesta.json();
          actualizarUI();
          mostrarPagina(paginaActual);
        } catch (error) {
          console.error("Error al cargar los datos:", error);
        }
      }

      function mostrarPagina(pagina) {
        const tablaCuerpo = document.querySelector("#tablaDatos tbody");
        tablaCuerpo.innerHTML = "";

        const inicio = (pagina - 1) * elementosPorPagina;
        const fin = inicio + elementosPorPagina;
        const datosPagina = datos.slice(inicio, fin);

        datosPagina.forEach(fila => {
          const tr = document.createElement("tr");
          tr.innerHTML = `
      <td>${fila.INVENTARIOINT}</td>
      <td>${fila.CATEGORIAS}</td>
      <td>${fila.DESCRIPCION}</td>
      <td>${fila.RESGUARDANTE}</td>
      <td>${fila.ESTADO}</td>
      <td>
        <button class="btn btn-outline-dark" data-bs-toggle="modal" data-bs-target="#ModalMasInfo" onclick="actualizarModal(${fila.ID})">
          <i class="bi bi-eye"></i> Mostrar todo
        </button>
      </td>
      `;
          tablaCuerpo.appendChild(tr);
        });

        actualizarUI();
      }

      async function actualizarModal(id) {
        try {
          const respuesta = await fetch(`http://localhost:3000/generalEspecifico?id=${id}`);
          const datos = await respuesta.json();

          if (datos.length > 0) {
            const registro = datos[0]; // Tomamos el primer resultado

            // Guardamos la ID en el modal para futuras consultas
            document.getElementById("modalTexto").setAttribute("data-id", registro.ID);

            // Mostrar información del registro
            document.getElementById("modalTexto").innerHTML = `
                <strong>ID:</strong> ${registro.ID} <br>
                <strong>EDIFICIO:</strong> ${registro.EDIFICIO} <br>
                <strong>DEPARTAMENTO:</strong> ${registro.DEPARTAMENTO} <br>
                <strong>UBICACIÓN:</strong> ${registro.UBICACION} <br>
                <strong>CATEGORÍA:</strong> ${registro.CATEGORIAS} <br>
                <strong>SUB-CATEGORIA:</strong> ${registro.SUBCATEGORIA} <br>
                <strong>MATERIAL:</strong> ${registro.MATERIAL} <br>
                <strong>DESCRIPCIÓN:</strong> ${registro.DESCRIPCION} <br>
                <strong>MARCA:</strong> ${registro.MARCA} <br>
                <strong>MODELO:</strong> ${registro.MODELO} <br>
                <strong>NÚMERO DE SERIE:</strong> ${registro.NUMEROSERIE} <br>
                <strong>NÚMERO DE INVENTARIO:</strong> ${registro.NUMEROINVENT} <br>
                <strong>NÚMERO SIBISEP:</strong> ${registro.NUMEROSEP} <br>
                <strong>RESGUARDANTE:</strong> ${registro.RESGUARDANTE} <br>
                <strong>ESTADO:</strong> ${registro.ESTADO} <br>
                <strong>NÚMERO INTERNO:</strong> ${registro.INVENTARIOINT} <br>
                <strong>PRECIO:</strong> ${registro.PRECIO} <br>
                <strong>SIBISEP:</strong> ${registro.SIBISEP} <br>
            `;
          } else {
            document.getElementById("modalTexto").textContent = "No se encontró información.";
          }
        } catch (error) {
          console.error("Error al obtener los datos:", error);
          document.getElementById("modalTexto").textContent = "Error al cargar la información.";
        }
      }




      function actualizarUI() {
        const totalPaginas = Math.ceil(datos.length / elementosPorPagina);
        document.getElementById("paginaActual").textContent = `${paginaActual} / ${totalPaginas}`;
        document.getElementById("inputPagina").max = totalPaginas;
        document.getElementById("inputPagina").value = paginaActual;
      }

      document.getElementById("prevPage").addEventListener("click", () => {
        if (paginaActual > 1) {
          paginaActual--;
          mostrarPagina(paginaActual);
        }
      });

      document.getElementById("nextPage").addEventListener("click", () => {
        if (paginaActual < Math.ceil(datos.length / elementosPorPagina)) {
          paginaActual++;
          mostrarPagina(paginaActual);
        }
      });

      document.getElementById("primeraPagina").addEventListener("click", () => {
        paginaActual = 1;
        mostrarPagina(paginaActual);
      });

      document.getElementById("ultimaPagina").addEventListener("click", () => {
        paginaActual = Math.ceil(datos.length / elementosPorPagina);
        mostrarPagina(paginaActual);
      });

      document.getElementById("inputPagina").addEventListener("change", (event) => {
        const nuevaPagina = parseInt(event.target.value, 10);
        if (nuevaPagina >= 1 && nuevaPagina <= Math.ceil(datos.length / elementosPorPagina)) {
          paginaActual = nuevaPagina;
          mostrarPagina(paginaActual);
        }
      });

      cargarDatos();

    </script>

    <div class="tablaContenido">
      <table border="1" id="tablaDatos">
        <thead>
          <tr>
            <th>Control Interno</th>
            <th>Categoría</th>
            <th>Descripción</th>
            <th>Resguardante</th>
            <th>Estado</th>
            <th>información completa</th>
          </tr>
        </thead>
        <tbody>
          <!-- Aquí se insertarán las filas dinámicamente -->
        </tbody>
      </table>

    </div>


    <br><br>

  </div>

  <!-- Modal de mostrar mas info-->
  <div class="modal fade" id="ModalMasInfo" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
    aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg"> <!-- Agregado "modal-lg" para hacerlo más ancho -->
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Más información</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body scrollable-modal"> <!-- Clase para manejar el scroll -->
          <p id="modalTexto"></p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-warning" id="btnEditarRegistro">Editar Registro</button>
          <button type="button" class="btn btn-danger" id="btnEliminarRegistro">Eliminar Registro</button>
          <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Aceptar</button>
        </div>

      </div>
    </div>
  </div>
  <script>
    document.getElementById("btnEditarRegistro").addEventListener("click", function () {
      const registroID = document.getElementById("modalTexto").getAttribute("data-id");

      fetch(`http://localhost:3000/generalEspecifico?id=${registroID}`)
        .then(response => response.json())
        .then(datos => {
          if (datos.length > 0) {
            const registro = datos[0];

            document.getElementById("editarID").value = registro.ID;
            document.getElementById("editarEdificio").value = registro.EDIFICIO;
            document.getElementById("editarDepartamento").value = registro.DEPARTAMENTO;
            document.getElementById("editarUbicacion").value = registro.UBICACION;
            document.getElementById("editarCategoria").value = registro.CATEGORIAS;
            document.getElementById("editarSubcategoria").value = registro.SUBCATEGORIA;
            document.getElementById("editarMaterial").value = registro.MATERIAL;
            document.getElementById("editarDescripcion").value = registro.DESCRIPCION;
            document.getElementById("editarMarca").value = registro.MARCA;
            document.getElementById("editarModelo").value = registro.MODELO;
            document.getElementById("editarNumeroSerie").value = registro.NUMEROSERIE;
            document.getElementById("editarNumeroInvent").value = registro.NUMEROINVENT;
            document.getElementById("editarNumeroSEP").value = registro.NUMEROSEP;
            document.getElementById("editarEstado").value = registro.ESTADO;
            document.getElementById("editarResguardante").value = registro.RESGUARDANTE;
            document.getElementById("editarInventarioInt").value = registro.INVENTARIOINT;
            document.getElementById("editarPrecio").value = registro.PRECIO;
            document.getElementById("editarSibisep").value = registro.SIBISEP;

            // Mostrar el modal de edición
            new bootstrap.Modal(document.getElementById("ModalEditarRegistro")).show();
          }
        })
        .catch(error => console.error("Error al obtener los datos:", error));
    });


    document.getElementById("btnEliminarRegistro").addEventListener("click", function () {
      const registroID = document.getElementById("modalTexto").getAttribute("data-id"); // Obtener ID almacenada en el modal

      if (!registroID) {
        Swal.fire({
          icon: "error",
          title: "Error",
          text: "No se encontró la ID del registro.",
          confirmButtonColor: "#d33",
          confirmButtonText: "Cerrar"
        });
        return;
      }

      Swal.fire({
        title: "¿Estás seguro?",
        text: "Este registro será eliminado permanentemente.",
        icon: "warning",
        showCancelButton: true,
        confirmButtonColor: "#d33",
        cancelButtonColor: "#3085d6",
        confirmButtonText: "Sí, eliminar",
        cancelButtonText: "Cancelar"
      }).then((result) => {
        if (result.isConfirmed) {
          fetch(`http://localhost:3000/eliminar-registro/${registroID}`, {
            method: "DELETE"
          })
            .then(response => response.json())
            .then(data => {
              Swal.fire({
                icon: "success",
                title: "Registro eliminado",
                text: "El inmueble ha sido eliminado correctamente.",
                confirmButtonColor: "#3085d6",
                confirmButtonText: "OK"
              }).then(() => {
                location.reload(); // Refresca la página tras la eliminación
              });
            })
            .catch(error => {
              Swal.fire({
                icon: "error",
                title: "Error",
                text: "No se pudo eliminar el registro.",
                confirmButtonColor: "#d33",
                confirmButtonText: "Cerrar"
              });
            });
        }
      });
    });

  </script>
  <!-- Modal de mostrar mas info-->

  <div class="modal fade" id="ModalEditarRegistro" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
    aria-labelledby="modalEditarLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="modalEditarLabel">Editar Registro</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form id="formEditarRegistro">
            <input type="hidden" id="editarID">

            <div class="input-group input-group-sm mb-3">
              <span class="input-group-text"
                style="width: 120px; color: rgb(255, 252, 252); background-color: rgb(13, 124, 59);">EDIFICIO</span>
              <input type="text" class="form-control me-3 w-60" id="editarEdificio" placeholder="Ej: A">

              <span class="input-group-text"
                style="width: 120px; color: rgb(255, 252, 252); background-color: rgb(13, 124, 59);">DEPARTAMENTO</span>
              <input type="text" class="form-control me-3 w-60" id="editarDepartamento"
                placeholder="Ej: DIVISION DE ESTUDIOS PROFESIONALES">

              <span class="input-group-text"
                style="width: 120px; color: rgb(255, 252, 252); background-color: rgb(13, 124, 59);">UBICACION</span>
              <input type="text" class="form-control me-3 w-60" id="editarUbicacion" placeholder="Ej: PASILLO">
            </div>

            <div class="input-group input-group-sm mb-3">
              <span class="input-group-text"
                style="width: 120px; color: rgb(255, 252, 252); background-color: rgb(13, 124, 59);">CATEGORÍA</span>
              <input type="text" class="form-control me-3 w-60" id="editarCategoria" placeholder="Ej: COMPUTADORA">

              <span class="input-group-text"
                style="width: 120px; color: rgb(255, 252, 252); background-color: rgb(13, 124, 59);">SUB
                CATEGORÍA</span>
              <input type="text" class="form-control me-3 w-60" id="editarSubcategoria"
                placeholder="Ej: SERVIDOR ETHERNET">

              <span class="input-group-text"
                style="width: 120px; color: rgb(255, 252, 252); background-color: rgb(13, 124, 59);">MATERIAL</span>
              <input type="text" class="form-control me-3 w-60" id="editarMaterial" placeholder="Ej: METAL">
            </div>

            <div class="input-group mb-3">
              <span class="input-group-text"
                style="width: 120px; color: rgb(255, 252, 252); background-color: rgb(13, 124, 59);">DESCRIPCIÓN</span>
              <textarea class="form-control me-3" id="editarDescripcion"
                placeholder="ESCRIBA AQUI LA DESCRIPCIÓN DEL INMUEBLE"></textarea>
            </div>

            <div class="input-group input-group-sm mb-3">
              <span class="input-group-text"
                style="width: 120px; color: rgb(255, 252, 252); background-color: rgb(13, 124, 59);">MARCA</span>
              <input type="text" class="form-control me-3 w-60" id="editarMarca" placeholder="Ej: HP">

              <span class="input-group-text"
                style="width: 120px; color: rgb(255, 252, 252); background-color: rgb(13, 124, 59);">MODELO</span>
              <input type="text" class="form-control me-3 w-60" id="editarModelo" placeholder="Ej: V193b">

              <span class="input-group-text"
                style="width: 120px; color: rgb(255, 252, 252); background-color: rgb(13, 124, 59);">NO. SERIE</span>
              <input type="text" class="form-control me-3 w-60" id="editarNumeroSerie" placeholder="Ej: 3CQ54617YH">
            </div>

            <div class="input-group input-group-sm mb-3">
              <span class="input-group-text"
                style="width: 120px; color: rgb(255, 252, 252); background-color: rgb(13, 124, 59);">NO. INVT</span>
              <input type="text" class="form-control me-3 w-60" id="editarNumeroInvent"
                placeholder="Ej: 116120079I5110100090972000023">

              <span class="input-group-text"
                style="width: 120px; color: rgb(255, 252, 252); background-color: rgb(13, 124, 59);">NO. SEP</span>
              <input type="text" class="form-control me-3 w-60" id="editarNumeroSEP" placeholder="Ej: 11832325">
            </div>

            <div class="input-group mb-3">
              <label class="input-group-text"
                style="width: 120px; color: rgb(255, 252, 252); background-color: rgb(13, 124, 59);">ESTADO</label>
              <select class="form-select me-3" id="editarEstado">
                <option selected>N/A</option>
                <option value="BUEN ESTADO">BUEN ESTADO</option>
                <option value="MAL ESTADO">MAL ESTADO</option>
              </select>

              <span class="input-group-text"
                style="width: 145px; color: rgb(255, 252, 252); background-color: rgb(13, 124, 59);">RESGUARDANTE</span>
              <input type="text" class="form-control me-3 w-60" id="editarResguardante"
                placeholder="Ej: NOMBRE DEL RESPONSABLE">
            </div>

            <div class="input-group input-group-sm mb-3">
              <span class="input-group-text"
                style="width: 120px; color: rgb(255, 252, 252); background-color: rgb(13, 124, 59);">NO. ITTUX</span>
              <input type="text" class="form-control me-3 w-60" id="editarInventarioInt" placeholder="Ej: ITT00001">

              <span class="input-group-text"
                style="width: 120px; color: rgb(255, 252, 252); background-color: rgb(13, 124, 59);">PRECIO</span>
              <input type="text" class="form-control me-3 w-60" id="editarPrecio" placeholder="Ej: $ 2500">

              <label class="input-group-text"
                style="width: 120px; color: rgb(255, 252, 252); background-color: rgb(13, 124, 59);">SIBISEB</label>
              <select class="form-select me-3" id="editarSibisep">
                <option selected>N/A</option>
                <option value="SI">SI</option>
                <option value="NO">NO</option>
              </select>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-success" id="btnGuardarEdicion">Guardar Cambios</button>
          <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cancelar</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    document.getElementById("btnGuardarEdicion").addEventListener("click", function () {
      const inmueble = {
        ID: document.getElementById("editarID").value,
        EDIFICIO: document.getElementById("editarEdificio").value,
        DEPARTAMENTO: document.getElementById("editarDepartamento").value,
        UBICACION: document.getElementById("editarUbicacion").value,
        CATEGORIAS: document.getElementById("editarCategoria").value,
        SUBCATEGORIA: document.getElementById("editarSubcategoria").value,
        MATERIAL: document.getElementById("editarMaterial").value,
        DESCRIPCION: document.getElementById("editarDescripcion").value,
        MARCA: document.getElementById("editarMarca").value,
        MODELO: document.getElementById("editarModelo").value,
        NUMEROSERIE: document.getElementById("editarNumeroSerie").value,
        NUMEROINVENT: document.getElementById("editarNumeroInvent").value,
        NUMEROSEP: document.getElementById("editarNumeroSEP").value,
        ESTADO: document.getElementById("editarEstado").value,
        RESGUARDANTE: document.getElementById("editarResguardante").value,
        INVENTARIOINT: document.getElementById("editarInventarioInt").value,
        PRECIO: document.getElementById("editarPrecio").value,
        SIBISEP: document.getElementById("editarSibisep").value
      };

      fetch("http://localhost:3000/editar-inmueble", {
        method: "PUT",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(inmueble)
      })
        .then(response => response.json())
        .then(data => {
          Swal.fire({
            icon: "success",
            title: "Registro Actualizado",
            text: "Los cambios se guardaron correctamente.",
            confirmButtonColor: "#3085d6",
            confirmButtonText: "OK"
          }).then(() => {
            location.reload();
          });
        })
        .catch(error => console.error("Error al actualizar el registro:", error));
    });
  </script>

  <!-- Modal de bandeja de entrada-->
  <div class="modal fade" id="ModalBandeja" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
    aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Envio de solicitudes</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">

          <div class="modalBody">

            <div id="message-inbox">

              <div id="messages"></div>
              <button id="clear-messages">Borrar mensajes</button>

            </div>
            <script src="src/assets/Bandeja.js"></script>

            <br>
          </div>

        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Aceptar</button>
        </div>
      </div>
    </div>
  </div>
  <!-- Modal de bandeja de entrada!-->

  <!-- Modal de registros -->
  <div class="modal fade" id="ModalRegistros" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
    aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Registro de nuevos inmuebles</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="contenedor-botones-centro">

            <button type="button" class="btn btn-outline-dark" data-bs-toggle="modal" data-bs-target="#ModalPendientes">
              <i class="bi bi-list-check icon-100"></i>
              <p>PENDIENTES</p>
            </button>

            <button type="button" class="btn btn-outline-dark" data-bs-toggle="modal"
              data-bs-target="#ModalRegistrosNuevos">
              <i class="bi bi-journal-plus icon-100"></i>
              <p>AÑADIR</p>
            </button>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Aceptar</button>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="ModalPendientes" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
    aria-labelledby="modalPendientesLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="modalPendientesLabel">Registros Pendientes</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <table class="table">
            <thead>
              <tr>
                <th>Edificio</th>
                <th>Departamento</th>
                <th>Ubicación</th>
                <th>Categoría</th>
                <th>Acciones</th>
              </tr>
            </thead>
            <tbody id="tablaPendientes">
              <!-- Los registros pendientes se cargarán aquí -->
            </tbody>
          </table>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Aceptar</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      document.querySelector("[data-bs-target='#ModalPendientes']").addEventListener("click", function () {
        fetch("http://localhost:3000/obtener-pendientes")
          .then(response => response.json())
          .then(datos => {
            const tabla = document.getElementById("tablaPendientes");
            tabla.innerHTML = ""; // Limpiamos la tabla antes de insertar nuevos datos

            if (datos.length > 0) {
              datos.forEach(registro => {
                const fila = document.createElement("tr");
                fila.innerHTML = `
                        <td>${registro.EDIFICIO}</td>
                        <td>${registro.DEPARTAMENTO}</td>
                        <td>${registro.UBICACION}</td>
                        <td>${registro.CATEGORIAS}</td>
                        <td>
                            <button class="btn btn-warning" onclick="editarPendiente(${registro.ID})" data-bs-toggle="modal" data-bs-target="#ModalEditarPendiente">Editar</button>
                            <button class="btn btn-success" onclick="moverARegistro(${registro.ID})">Mover a Registro</button>
                            <button class="btn btn-danger" onclick="eliminarPendiente(${registro.ID})">Eliminar</button>
                        </td>
                    `;
                tabla.appendChild(fila);
              });
            } else {
              tabla.innerHTML = "<tr><td colspan='5' class='text-center'>No hay registros pendientes</td></tr>";
            }
          })
          .catch(error => console.error("Error al obtener registros pendientes:", error));
      });
    });

    function editarPendiente(id) {
    fetch(`http://localhost:3000/obtener-pendiente/${id}`)
        .then(response => response.json())
        .then(registro => {
            // Asignar valores a los inputs del formulario de edición
            document.getElementById("editarPendienteID").value = registro.ID;
            document.getElementById("editarPendienteEdificio").value = registro.EDIFICIO;
            document.getElementById("editarPendienteDepartamento").value = registro.DEPARTAMENTO;
            document.getElementById("editarPendienteUbicacion").value = registro.UBICACION;
            document.getElementById("editarPendienteCategoria").value = registro.CATEGORIAS;
            document.getElementById("editarPendienteSubcategoria").value = registro.SUBCATEGORIA;
            document.getElementById("editarPendienteMaterial").value = registro.MATERIAL;
            document.getElementById("editarPendienteDescripcion").value = registro.DESCRIPCION;
            document.getElementById("editarPendienteMarca").value = registro.MARCA;
            document.getElementById("editarPendienteModelo").value = registro.MODELO;
            document.getElementById("editarPendienteNumeroSerie").value = registro.NUMEROSERIE;
            document.getElementById("editarPendienteNumeroInvent").value = registro.NUMEROINVENT;
            document.getElementById("editarPendienteNumeroSEP").value = registro.NUMEROSEP;
            document.getElementById("editarPendienteEstado").value = registro.ESTADO;
            document.getElementById("editarPendienteResguardante").value = registro.RESGUARDANTE;
            document.getElementById("editarPendienteInventarioInt").value = registro.INVENTARIOINT;
            document.getElementById("editarPendientePrecio").value = registro.PRECIO;
            document.getElementById("editarPendienteSibisep").value = registro.SIBISEP;

            // Abrir el modal de edición con los datos cargados
            new bootstrap.Modal(document.getElementById("ModalEditarPendiente")).show();
        })
        .catch(error => console.error("Error al obtener el registro:", error));
}


    function eliminarPendiente(id) {
      Swal.fire({
        title: "¿Eliminar este registro?",
        text: "Esta acción no se puede deshacer.",
        icon: "warning",
        showCancelButton: true,
        confirmButtonColor: "#d33",
        cancelButtonColor: "#3085d6",
        confirmButtonText: "Sí, eliminar",
        cancelButtonText: "Cancelar"
      }).then((result) => {
        if (result.isConfirmed) {
          fetch(`http://localhost:3000/eliminar-pendiente/${id}`, { method: "DELETE" })
            .then(response => response.json())
            .then(() => {
              Swal.fire({
                icon: "success",
                title: "Registro Eliminado",
                text: "El registro pendiente ha sido eliminado correctamente.",
                confirmButtonColor: "#3085d6",
                confirmButtonText: "OK"
              }).then(() => {
                location.reload(); // Actualizar la lista de pendientes
              });
            })
            .catch(error => console.error("Error al eliminar el registro:", error));
        }
      });
    }


    function moverARegistro(id) {
      Swal.fire({
        title: "¿Mover este registro a la lista oficial?",
        text: "Este registro pasará de pendientes a 'General'.",
        icon: "question",
        showCancelButton: true,
        confirmButtonColor: "#3085d6",
        cancelButtonColor: "#d33",
        confirmButtonText: "Sí, mover",
        cancelButtonText: "Cancelar"
      }).then((result) => {
        if (result.isConfirmed) {
          fetch(`http://localhost:3000/mover-registro/${id}`, { method: "POST" })
            .then(response => response.json())
            .then(data => {
              Swal.fire({
                icon: "success",
                title: "Registro Movido",
                text: "El inmueble ha sido movido correctamente a 'General'.",
                confirmButtonColor: "#3085d6",
                confirmButtonText: "OK"
              }).then(() => {
                location.reload(); // Actualizar la página
              });
            })
            .catch(error => console.error("Error al mover el registro:", error));
        }
      });
    }


  </script>

  <div class="modal fade" id="ModalEditarPendiente" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
    aria-labelledby="modalEditarPendienteLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="modalEditarPendienteLabel">Editar Registro Pendiente</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form id="formEditarPendiente">
            <input type="hidden" id="editarPendienteID">

            <div class="input-group input-group-sm mb-3">
              <span class="input-group-text" style="width: 120px; color: rgb(0, 0, 0); background-color: rgb(218, 188, 18);">EDIFICIO</span>
              <input type="text" class="form-control me-3 w-60" id="editarPendienteEdificio" placeholder="Ej: A">

              <span class="input-group-text" style="width: 120px; color: rgb(0, 0, 0); background-color: rgb(218, 188, 18);">DEPARTAMENTO</span>
              <input type="text" class="form-control me-3 w-60" id="editarPendienteDepartamento" placeholder="Ej: DIVISION DE ESTUDIOS PROFESIONALES">

              <span class="input-group-text" style="width: 120px; color: rgb(0, 0, 0); background-color: rgb(218, 188, 18);">UBICACION</span>
              <input type="text" class="form-control me-3 w-60" id="editarPendienteUbicacion" placeholder="Ej: PASILLO">
            </div>

            <div class="input-group input-group-sm mb-3">
              <span class="input-group-text" style="width: 120px; color: rgb(0, 0, 0); background-color: rgb(218, 188, 18);">CATEGORIA</span>
              <input type="text" class="form-control me-3 w-60" id="editarPendienteCategoria" placeholder="Ej: COMPUTADORA">

              <span class="input-group-text" style="width: 120px; color: rgb(0, 0, 0); background-color: rgb(218, 188, 18);">SUBCATEGORIA</span>
              <input type="text" class="form-control me-3 w-60" id="editarPendienteSubcategoria" placeholder="Ej: SERVIDOR ETHERNET">

              <span class="input-group-text" style="width: 120px; color: rgb(0, 0, 0); background-color: rgb(218, 188, 18);">MATERIAL</span>
              <input type="text" class="form-control me-3 w-60" id="editarPendienteMaterial" placeholder="Ej: METAL">
            </div>

            <div class="input-group mb-3">
              <span class="input-group-text" style="width: 120px; color: rgb(0, 0, 0); background-color: rgb(218, 188, 18);">DESCRIPCION</span>
              <textarea class="form-control me-3" id="editarPendienteDescripcion" placeholder="ESCRIBE AQUI LA DESCRIPCION DEL INMUEBLE"></textarea>
            </div>

            <div class="input-group input-group-sm mb-3">
              <span class="input-group-text" style="width: 120px; color: rgb(0, 0, 0); background-color: rgb(218, 188, 18);">MARCA</span>
              <input type="text" class="form-control me-3 w-60" id="editarPendienteMarca" placeholder="Ej: HP">

              <span class="input-group-text" style="width: 120px; color: rgb(0, 0, 0); background-color: rgb(218, 188, 18);">MODELO</span>
              <input type="text" class="form-control me-3 w-60" id="editarPendienteModelo" placeholder="Ej: V193b">

              <span class="input-group-text" style="width: 120px; color: rgb(0, 0, 0); background-color: rgb(218, 188, 18);">NO. SERIE</span>
              <input type="text" class="form-control me-3 w-60" id="editarPendienteNumeroSerie" placeholder="Ej: 3CQ54617YH">
            </div>

            <div class="input-group input-group-sm mb-3">
              <span class="input-group-text" style="width: 120px; color: rgb(0, 0, 0); background-color: rgb(218, 188, 18);">NO. INVENT</span>
              <input type="text" class="form-control me-3 w-60" id="editarPendienteNumeroInvent" placeholder="Ej: 116120079I5110100090972000023">

              <span class="input-group-text" style="width: 120px; color: rgb(0, 0, 0); background-color: rgb(218, 188, 18);">NO. SEP</span>
              <input type="text" class="form-control me-3 w-60" id="editarPendienteNumeroSEP" placeholder="Ej: 11832325">
            </div>

            <div class="input-group mb-3">
              <label class="input-group-text" style="width: 120px; color: rgb(0, 0, 0); background-color: rgb(218, 188, 18);">ESTADO</label>
              <select class="form-select me-3" id="editarPendienteEstado">
                <option selected>N/A</option>
                <option value="BUEN ESTADO">BUEN ESTADO</option>
                <option value="MAL ESTADO">MAL ESTADO</option>
              </select>

              <span class="input-group-text" style="width: 145px; color: rgb(0, 0, 0); background-color: rgb(218, 188, 18);">RESGUARDO</span>
              <input type="text" class="form-control me-3 w-60" id="editarPendienteResguardante" placeholder="EJ: PERSONA RESPONSABLE">
            </div>

            <div class="input-group input-group-sm mb-3">
              <span class="input-group-text" style="width: 120px; color: rgb(0, 0, 0); background-color: rgb(218, 188, 18);">NO. ITTUX</span>
              <input type="text" class="form-control me-3 w-60" id="editarPendienteInventarioInt" placeholder="Ej: ITT00001">

              <span class="input-group-text" style="width: 120px; color: rgb(0, 0, 0); background-color: rgb(218, 188, 18);">PRECIO</span>
              <input type="text" class="form-control me-3 w-60" id="editarPendientePrecio" placeholder="Ej: $ 2500">

              <label class="input-group-text" style="width: 120px; color: rgb(0, 0, 0); background-color: rgb(218, 188, 18);">SIBISEP</label>
              <select class="form-select me-3" id="editarPendienteSibisep">
                <option selected>N/A</option>
                <option value="SI">SI</option>
                <option value="NO">NO</option>
              </select>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-success" id="btnGuardarEdicionPendiente">Guardar Cambios</button>
          <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cancelar</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
    document.getElementById("ModalEditarPendiente").addEventListener("hidden.bs.modal", function () {
        document.querySelectorAll(".modal-backdrop").forEach(el => el.remove()); // Elimina backdrop sobrante
    });
});

    document.getElementById("btnGuardarEdicionPendiente").addEventListener("click", function () {
    const pendienteEditado = {
        ID: document.getElementById("editarPendienteID").value,
        EDIFICIO: document.getElementById("editarPendienteEdificio").value,
        DEPARTAMENTO: document.getElementById("editarPendienteDepartamento").value,
        UBICACION: document.getElementById("editarPendienteUbicacion").value,
        CATEGORIAS: document.getElementById("editarPendienteCategoria").value,
        SUBCATEGORIA: document.getElementById("editarPendienteSubcategoria").value,
        MATERIAL: document.getElementById("editarPendienteMaterial").value,
        DESCRIPCION: document.getElementById("editarPendienteDescripcion").value,
        MARCA: document.getElementById("editarPendienteMarca").value,
        MODELO: document.getElementById("editarPendienteModelo").value,
        NUMEROSERIE: document.getElementById("editarPendienteNumeroSerie").value,
        NUMEROINVENT: document.getElementById("editarPendienteNumeroInvent").value,
        NUMEROSEP: document.getElementById("editarPendienteNumeroSEP").value,
        ESTADO: document.getElementById("editarPendienteEstado").value,
        RESGUARDANTE: document.getElementById("editarPendienteResguardante").value,
        INVENTARIOINT: document.getElementById("editarPendienteInventarioInt").value,
        PRECIO: document.getElementById("editarPendientePrecio").value,
        SIBISEP: document.getElementById("editarPendienteSibisep").value
    };

    Swal.fire({
        title: "¿Confirmas la edición del registro?",
        text: "Se guardarán los cambios realizados.",
        icon: "question",
        showCancelButton: true,
        confirmButtonColor: "#3085d6",
        cancelButtonColor: "#d33",
        confirmButtonText: "Sí, guardar cambios",
        cancelButtonText: "Cancelar"
    }).then((result) => {
        if (result.isConfirmed) {
            fetch("http://localhost:3000/editar-pendiente", {
                method: "PUT",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(pendienteEditado)
            })
            .then(response => response.json())
            .then(data => {
                Swal.fire({
                    icon: "success",
                    title: "Registro Actualizado",
                    text: "Los cambios se guardaron correctamente.",
                    confirmButtonColor: "#3085d6",
                    confirmButtonText: "OK"
                }).then(() => {
                    location.reload(); // Recargar la lista de pendientes
                });
            })
            .catch(error => {
                Swal.fire({
                    icon: "error",
                    title: "Error",
                    text: "Hubo un problema al actualizar el registro.",
                    confirmButtonColor: "#d33",
                    confirmButtonText: "Cerrar"
                });
            });
        }
    });
});

  </script>


  <!-- Modal de registros nuevos -->
  <div class="modal fade" id="ModalRegistrosNuevos" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
    aria-labelledby="exampleModalLabel2" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel2">Registro de nuevos inmuebles</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="input-group input-group-sm mb-3">
            <span class="input-group-text" id="inputGroup-sizing-sm"
              style="width: 120px; color: rgb(255, 252, 252); background-color: rgb(33, 1, 150);">EDIFICIO</span>
            <input type="text" class="form-control me-3 w-60" id="inputEdificio" aria-label="Sizing example input"
              aria-describedby="inputGroup-sizing-sm" placeholder="Ej: A">

            <span class="input-group-text" id="inputGroup-sizing-sm"
              style="width: 120px; color: rgb(255, 252, 252); background-color: rgb(33, 1, 150);">DEPARTAMENTO</span>
            <input type="text" class="form-control me-3 w-60" id="inputDepartamento" aria-label="Sizing example input"
              aria-describedby="inputGroup-sizing-sm" placeholder="Ej: DIVISION DE ESTUDIOS PROFESIONALES">

            <span class="input-group-text" id="inputGroup-sizing-sm"
              style="width: 120px; color: rgb(255, 252, 252); background-color: rgb(33, 1, 150);">UBICACION</span>
            <input type="text" class="form-control me-3 w-60" id="inputUbicacion" aria-label="Sizing example input"
              aria-describedby="inputGroup-sizing-sm" placeholder="Ej: PASILLO">
          </div>

          <div class="input-group input-group-sm mb-3">
            <span class="input-group-text" id="inputGroup-sizing-sm"
              style="width: 120px; color: rgb(255, 252, 252); background-color: rgb(33, 1, 150);">CATEGORÍA</span>
            <input type="text" class="form-control me-3 w-60" id="inputCategoria" aria-label="Sizing example input"
              aria-describedby="inputGroup-sizing-sm" placeholder="Ej: COMPUTADORA">

            <span class="input-group-text" id="inputGroup-sizing-sm"
              style="width: 120px; color: rgb(255, 252, 252); background-color: rgb(33, 1, 150);">SUB CATEGORÍA</span>
            <input type="text" class="form-control me-3 w-60" id="inputSubcategoria" aria-label="Sizing example input"
              aria-describedby="inputGroup-sizing-sm" placeholder="Ej: SERVIDOR ETHERNET">

            <span class="input-group-text" id="inputGroup-sizing-sm"
              style="width: 120px; color: rgb(255, 252, 252); background-color: rgb(33, 1, 150);">MATERIAL</span>
            <input type="text" class="form-control me-3 w-60" id="inputMaterial" aria-label="Sizing example input"
              aria-describedby="inputGroup-sizing-sm" placeholder="Ej: METAL">
          </div>

          <div class="input-group mb-3">
            <span class="input-group-text" id="inputGroup-sizing-sm"
              style="width: 120px; color: rgb(255, 252, 252); background-color: rgb(33, 1, 150);">DESCRIPCION</span>
            <textarea class="form-control me-3" id="inputDescripcion" aria-label="With textarea"
              placeholder="ESCRIBA AQUI LA DESCRIPCION DEL INMUEBLE"></textarea>
          </div>

          <div class="input-group input-group-sm mb-3">
            <span class="input-group-text" id="inputGroup-sizing-sm"
              style="width: 120px; color: rgb(255, 252, 252); background-color: rgb(33, 1, 150);">MARCA</span>
            <input type="text" class="form-control me-3 w-60" id="inputMarca" aria-label="Sizing example input"
              aria-describedby="inputGroup-sizing-sm" placeholder="Ej: HP">

            <span class="input-group-text" id="inputGroup-sizing-sm"
              style="width: 120px; color: rgb(255, 252, 252); background-color: rgb(33, 1, 150);">MODELO</span>
            <input type="text" class="form-control me-3 w-60" id="inputModelo" aria-label="Sizing example input"
              aria-describedby="inputGroup-sizing-sm" placeholder="Ej: V193b">

            <span class="input-group-text" id="inputGroup-sizing-sm"
              style="width: 120px; color: rgb(255, 252, 252); background-color: rgb(33, 1, 150);">NO. SERIE</span>
            <input type="text" class="form-control me-3 w-60" id="inputNumeroSerie" aria-label="Sizing example input"
              aria-describedby="inputGroup-sizing-sm" placeholder="Ej: 3CQ54617YH">
          </div>

          <div class="input-group input-group-sm mb-3">
            <span class="input-group-text" id="inputGroup-sizing-sm"
              style="width: 120px; color: rgb(255, 252, 252); background-color: rgb(33, 1, 150);">NO. INVT</span>
            <input type="text" class="form-control me-3 w-60" id="inputNumeroInvent" aria-label="Sizing example input"
              aria-describedby="inputGroup-sizing-sm" placeholder="Ej: 116120079I5110100090972000023">

            <span class="input-group-text" id="inputGroup-sizing-sm"
              style="width: 120px; color: rgb(255, 252, 252); background-color: rgb(33, 1, 150);">NO. SEP</span>
            <input type="text" class="form-control me-3 w-60" id="inputNumeroSEP" aria-label="Sizing example input"
              aria-describedby="inputGroup-sizing-sm" placeholder="Ej: 11832325">

          </div>

          <div class="input-group mb-3">

            <label class="input-group-text" for="inputGroupSelect01"
              style="width: 120px; color: rgb(255, 252, 252); background-color: rgb(33, 1, 150);">ESTADO</label>
            <select class="form-select me-3" id="inputEstado">
              <option selected>N/A</option>
              <option value="1">BUEN ESTADO</option>
              <option value="2">MAL ESTADO</option>
            </select>

            <span class="input-group-text" id="inputGroup-sizing-sm"
              style="width: 145px; color: rgb(255, 252, 252); background-color: rgb(33, 1, 150);">
              RESGUARDANTE
            </span>
            <input type="text" class="form-control me-3 w-60" id="inputResguardante"
              placeholder="Ej: NOMBRE DEL RESPONSABLE">


          </div>

          <div class="input-group input-group-sm mb-3">
            <span class="input-group-text" id="inputGroup-sizing-sm"
              style="width: 120px; color: rgb(255, 252, 252); background-color: rgb(33, 1, 150);">NO. ITTUX</span>
            <input type="text" class="form-control me-3 w-60" id="inputInventarioInt" aria-label="Sizing example input"
              aria-describedby="inputGroup-sizing-sm" placeholder="Ej: ITT00001">

            <span class="input-group-text" id="inputGroup-sizing-sm"
              style="width: 120px; color: rgb(255, 252, 252); background-color: rgb(33, 1, 150);">PRECIO</span>
            <input type="text" class="form-control me-3 w-60" id="inputPrecio" aria-label="Sizing example input"
              aria-describedby="inputGroup-sizing-sm" placeholder="Ej: $ 2500">

            <label class="input-group-text" for="inputGroupSelect02"
              style="width: 120px; color: rgb(255, 252, 252); background-color: rgb(33, 1, 150);">SIBISEB</label>
            <select class="form-select me-3" id="inputSibisep">
              <option selected>N/A</option>
              <option value="1">SI</option>
              <option value="2">NO</option>
            </select>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-info" id="btnAñadirPendientes">Añadir a pendientes</button>
          <button type="button" class="btn btn-success" id="btnAñadirRegistro">Añadir registro</button>
          <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cancelar</button>
        </div>
      </div>
    </div>
  </div>
  <script>
    document.getElementById("btnAñadirPendientes").addEventListener("click", function () {
      const inmueblePendiente = {
        EDIFICIO: document.getElementById("inputEdificio").value,
        DEPARTAMENTO: document.getElementById("inputDepartamento").value,
        UBICACION: document.getElementById("inputUbicacion").value,
        CATEGORIAS: document.getElementById("inputCategoria").value,
        SUBCATEGORIA: document.getElementById("inputSubcategoria").value,
        MATERIAL: document.getElementById("inputMaterial").value,
        DESCRIPCION: document.getElementById("inputDescripcion").value,
        MARCA: document.getElementById("inputMarca").value,
        MODELO: document.getElementById("inputModelo").value,
        NUMEROSERIE: document.getElementById("inputNumeroSerie").value,
        NUMEROINVENT: document.getElementById("inputNumeroInvent").value,
        NUMEROSEP: document.getElementById("inputNumeroSEP").value,
        ESTADO: document.querySelector("#inputEstado option:checked").textContent,
        RESGUARDANTE: document.getElementById("inputResguardante").value,
        INVENTARIOINT: document.getElementById("inputInventarioInt").value,
        PRECIO: document.getElementById("inputPrecio").value,
        SIBISEP: document.querySelector("#inputSibisep option:checked").textContent

      };

      Swal.fire({
        title: "¿Deseas agregar este registro a pendientes?",
        text: "Los datos serán almacenados en la tabla 'pendientes'.",
        icon: "question",
        showCancelButton: true,
        confirmButtonColor: "#3085d6",
        cancelButtonColor: "#d33",
        confirmButtonText: "Sí, añadir",
        cancelButtonText: "Cancelar"
      }).then((result) => {
        if (result.isConfirmed) {
          fetch("http://localhost:3000/guardar-pendientes", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(inmueblePendiente)
          })
            .then(response => response.json())
            .then(data => {
              Swal.fire({
                icon: "success",
                title: "Añadido a pendientes",
                text: "El registro se ha guardado correctamente.",
                confirmButtonColor: "#3085d6",
                confirmButtonText: "OK"
              }).then(() => {
                location.reload();
              });
            })
            .catch(error => {
              Swal.fire({
                icon: "error",
                title: "Error",
                text: "Hubo un problema al añadir el registro a pendientes.",
                confirmButtonColor: "#d33",
                confirmButtonText: "Cerrar"
              });
            });
        }
      });
    });

    document.getElementById("btnAñadirRegistro").addEventListener("click", function () {
      const inmuebleAñadir = {

        EDIFICIO: document.getElementById("inputEdificio").value,
        DEPARTAMENTO: document.getElementById("inputDepartamento").value,
        UBICACION: document.getElementById("inputUbicacion").value,
        CATEGORIAS: document.getElementById("inputCategoria").value,
        SUBCATEGORIA: document.getElementById("inputSubcategoria").value,
        MATERIAL: document.getElementById("inputMaterial").value,
        DESCRIPCION: document.getElementById("inputDescripcion").value,
        MARCA: document.getElementById("inputMarca").value,
        MODELO: document.getElementById("inputModelo").value,
        NUMEROSERIE: document.getElementById("inputNumeroSerie").value,
        NUMEROINVENT: document.getElementById("inputNumeroInvent").value,
        NUMEROSEP: document.getElementById("inputNumeroSEP").value,
        ESTADO: document.querySelector("#inputEstado option:checked").textContent,
        RESGUARDANTE: document.getElementById("inputResguardante").value,
        INVENTARIOINT: document.getElementById("inputInventarioInt").value,
        PRECIO: document.getElementById("inputPrecio").value,
        SIBISEP: document.querySelector("#inputSibisep option:checked").textContent

      };


      Swal.fire({
        title: "¿Deseas guardar este registro?",
        text: "Verifica que todos los datos sean correctos antes de continuar.",
        icon: "question",
        showCancelButton: true,
        confirmButtonColor: "#3085d6",
        cancelButtonColor: "#d33",
        confirmButtonText: "Sí, guardar",
        cancelButtonText: "Cancelar"
      }).then((result) => {
        if (result.isConfirmed) {
          // Procedemos con el guardado
          fetch("http://localhost:3000/guardar-inmueble", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(inmuebleAñadir)
          })
            .then(response => response.json())
            .then(data => {
              Swal.fire({
                icon: "success",
                title: "Registro Guardado",
                text: "El inmueble se ha añadido correctamente.",
                confirmButtonColor: "#3085d6",
                confirmButtonText: "OK"
              }).then(() => {
                location.reload(); // Refresca la página tras cerrar la alerta
              });
            })
            .catch(error => {
              Swal.fire({
                icon: "error",
                title: "Error",
                text: "Hubo un problema al guardar el registro.",
                confirmButtonColor: "#d33",
                confirmButtonText: "Cerrar"
              });
            });
        }
      });
    });


  </script>

  <footer>
    <br><br>

    <div class="title">
      <br>
      <h5 class="contenedor">SISTEMA DE GESTIÓN DE RECURSOS PARA EL ÁREA DE RECURSOS MATERIALES Y DE SERVICIOS
      </h5>
      <h6 class="contenedor">INSTITUTO TECNOLOGICO DE TUXTEPEC
      </h6>
      <br>
    </div>
  </footer>

</body>

</html>